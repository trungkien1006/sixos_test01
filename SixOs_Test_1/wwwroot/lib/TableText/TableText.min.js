const TableText=function(){const t=t=>"string"==typeof t&&t.indexOf("<")>-1,e=(t,e)=>{for(const[n,o]of Object.entries(e))t.style[n]=o},n=(t,e)=>{if(!e.includes("."))return t[e];const n=e.split(".");let o=t;for(const t of n){if(!o||!(t in o))return;o=o[t]}return o},o=t=>{if(!t)return"";const e=new Date(t);return`${String(e.getDate()).padStart(2,"0")}-${String(e.getMonth()+1).padStart(2,"0")}-${e.getFullYear()}`},a=t=>{if(!t)return"";const e=new Date(t);return`${String(e.getDate()).padStart(2,"0")}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getFullYear()).slice(-2)}`},s=t=>{if(!t)return"";const e=new Date(t);return`${String(e.getDate()).padStart(2,"0")}-${String(e.getMonth()+1).padStart(2,"0")}-${e.getFullYear()} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},i=t=>{if(!t)return"";const e=new Date(t);return`${String(e.getDate()).padStart(2,"0")}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getFullYear()).slice(-2)} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},l=t=>t?Number.isInteger(t)?t.toLocaleString("en-US"):t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"",r=t=>{const n=[];function o(t){return t.reduce(((t,e)=>"string"==typeof e?t+1:"object"==typeof e?e.children&&e.children.length>0?t+o(e.children):t+1:t),0)}!function t(e,a){n[a]||(n[a]=[]),e.forEach((e=>{if("string"==typeof e)n[a].push({content:e,rowspan:1,colspan:1,main:e.main,styles:e.styles});else if("object"==typeof e)if(e.children&&e.children.length>0){const s=o(e.children);let i={content:e.content?e.content():e.title,rowspan:1,colspan:s,main:e.main,styles:e.styles,parent:!0};e.class&&(i.class=e.class),e.first&&(i.first=e.first),e.last&&(i.last=e.last),n[a].push(i),t(e.children,a+1)}else{let t={content:e.content?e.content():e.title,rowspan:1,colspan:1,main:e.main,styles:e.styles};e.class&&(t.class=e.class),e.first&&(t.first=e.first),e.last&&(t.last=e.last),n[a].push(t)}}))}(t,0);const a=function t(e){return e.reduce(((e,n)=>"string"==typeof n?Math.max(e,1):"object"==typeof n&&n.children?Math.max(e,1+t(n.children)):e),0)}(t);n.forEach(((t,e)=>{t.forEach((t=>{1!==t.rowspan||1!==t.colspan||t.parent||(t.rowspan=a-e)}))}));const s=document.createDocumentFragment();return n.forEach((t=>{const n=document.createElement("tr");n.classList.add("text-center"),t.forEach((t=>{const o=document.createElement("th");t.class&&(o.className=t.class),t.first&&o.classList.add("first-th-column"),t.last&&o.classList.add("last-th-column"),t.main&&o.classList.add("col-tabletext-main"),o.rowSpan=t.rowspan,o.colSpan=t.colspan,o.innerHTML=t.content,t.styles&&e(o,t.styles),n.appendChild(o)})),s.appendChild(n)})),s},c=t=>{const e={name:"stt",class:"text-center"};Array.isArray(t)&&(t.unshift(e),t.forEach((t=>{t.columnSetting&&c(t.columnSetting)})))},d=(t,e)=>{const n=document.createElement((t.dropdownBtn,"div"));if(n.classList.add(t.dropdownBtn?"dropdown":"btn-group"),t.dropdownBtn){n.innerHTML='<a href="#" class="link-secondary" data-bs-toggle="dropdown" aria-expanded="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 6l16 0"></path><path d="M4 12l16 0"></path><path d="M4 18l16 0"></path></svg></a>';const a=document.createElement("div");a.className="dropdown-menu dropdown-menu-end",o(t.listBtn,a,e,!0),n.appendChild(a)}else o(t.listBtn,n,e,!1);function o(t,e,n,o){t.forEach((t=>{const a=document.createElement(t.content?"div":"button");t.content?(a.innerHTML=t.content(n),t.onClick&&(a.onclick=e=>{e.stopPropagation(),t.onClick(n)})):(a.innerHTML=function(t){const e={edit:'<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-edit" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"></path><path d="M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"></path><path d="M16 5l3 3"></path></svg>',pdf:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-printer"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2"></path><path d="M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4"></path><path d="M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z"></path></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M4 7l16 0"></path><path d="M10 11l0 6"></path><path d="M14 11l0 6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"></path><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"></path></svg>',watch:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"></path><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6"></path></svg>',history:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-history"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M12 8l0 4l2 2"></path><path d="M3.05 11a9 9 0 1 1 .5 4m-.5 5v-5h5"></path></svg>',save:'<svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>'};if(t.edit)return e.edit;if(t.pdf)return e.pdf;if(t.delete)return e.delete;if(t.watch)return e.watch;if(t.history)return e.history;if(t.save)return e.save}(t),a.className=function(t,e){const n=e?"dropdown-item":"btn btn-icon",o={edit:e?"text-azure":"bg-azure-lt",pdf:e?"text-success":"bg-success-lt",delete:e?"text-danger":"bg-danger-lt",watch:e?"text-warning":"bg-warning-lt",history:e?"text-info":"bg-info-lt",save:e?"text-azure":"bg-azure-lt"};let a="";t.edit&&(a=o.edit);t.pdf&&(a=o.pdf);t.delete&&(a=o.delete);t.watch&&(a=o.watch);t.history&&(a=o.history);t.save&&(a=o.save);return`${n} ${a} ${t.class||""}`}(t,o),a.title=t.title||"",t.title&&o&&a.appendChild(document.createTextNode(t.title)),t.onClick&&(a.onclick=e=>{e.stopPropagation(),t.onClick(n)})),e.appendChild(a)}))}return n},h=(t,a,i,r)=>{let c=[];!function t(e){e.forEach((e=>{"string"==typeof e?c.push(e):"object"==typeof e&&(e.children&&e.children.length>0?t(e.children):c.push(e.title))}))}(i);const h=document.createElement("div");h.className="div-tabletext-show-detail-parent",h.style.position="absolute",h.style.top=`${t.bottom}px`,h.style.left=`${t.left}px`;const p=document.createElement("div");p.className="dropdown-menu-arrow div-tabletext-show-detail d-block p-2",p.style.width="90vw";const u=document.createElement("table");return u.className="table table-vcenter table-bordered",r.forEach(((t,i)=>{const r=document.createElement("tr"),h=document.createElement("th");h.textContent=c[i],r.appendChild(h);const p=document.createElement("td");t.name?t.name.includes(".")?data=n(a,t.name):data=void 0!==a[t.name]?a[t.name]:"":data=void 0!==a[t]?a[t]:"",t.content?p.innerHTML=t.content(a):t.btnGroup?(p.classList.add("text-center"),t.btnGroup.dropdownBtn=!1,p.appendChild(d(t.btnGroup,a))):(t.format?data=t.format(data):t.date?data=o(data):t.datetime?data=s(data):t.decimal&&(data=l(data)),t.date||t.datetime||t.center?p.classList.add("text-center"):(t.decimal||t.end)&&p.classList.add("text-end"),p.textContent=data),t.first?p.classList.add("first-td-column"):t.last&&p.classList.add("last-td-column"),t.class&&(p.className+=" "+t.class),t.styles&&e(p,t.styles),t.colspan&&(p.colSpan=t.colspan),t.rowspan&&(p.rowSpan=t.rowspan),r.appendChild(p),u.appendChild(r)})),p.appendChild(u),h.appendChild(p),h};function p(t,e,r,c){let d=function(t,e){if("string"==typeof t)return n(e,t);if("object"==typeof t){if(t.data)return t.data(e);if(t.name)return n(e,t.name)}return null}(r,c);const h="boolean"==typeof d;"object"==typeof r.sumName?t[r.sumName.name]+=r.sumName.filter(c):t[r.sumName]+=h&&d?1:d,d=function(t,e){const n={format:e=>t.format(e),date:o,dateShort:a,datetime:s,datetimeShort:i,decimal:l};for(const o of Object.keys(n))if(t[o])return n[o](e);return e}(r,d);const p=function(t,e){return t.date||t.datetime||t.center||t.dateShort||t.datetimeShort||e||t.btnGroup?"text-center":t.decimal||t.end?"text-end":""}(r,h);p&&e.classList.add(p),function(t,e,n){if(n.maxWidth){const o=document.createElement("p");o.className="text-truncate overflow-hidden mb-0",o.style.maxWidth=`${n.maxWidth}px`,o.textContent=e,o.title=e,t.appendChild(o)}else t.innerHTML=e}(e,d,r)}function u(t,n,o,a,s,i){const{first:l,last:r,class:c,main:d,styles:p,colspan:u,rowspan:g,hide:m}=a;l?n.classList.add("first-td-column"):r&&n.classList.add("last-td-column"),c&&(n.className+=" "+c),d&&function(t,e,n,o,a){const{haveColMobile:s,haveFirstMain:i}=a;s.value||(s.value=!0,t.table.classList.add("table-text-mobile"));if(e.classList.add("col-tabletext-main"),!i.value){i.value=!0,e.classList.add("col-tabletext-main-first"),e.innerHTML='\n                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"\n                    viewBox="0 0 24 24" fill="none" stroke="currentColor"\n                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"\n                    class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-right col-tabletext-main-icon">\n                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>\n                    <path d="M9 6l6 6l-6 6" />\n                </svg>\n            '+e.textContent;const a=e.querySelector(".col-tabletext-main-icon");a.onclick=e=>{e.stopPropagation(),document.querySelectorAll(".div-tabletext-show-detail-parent").forEach((t=>t.remove())),document.querySelectorAll(".col-tabletext-main-icon").forEach((t=>{t!==a&&(t.style.transform="")}));const s=h(n.getBoundingClientRect(),o,t.headerSetting,t.columnSetting);"rotate(90deg)"===a.style.transform?a.style.transform="":(a.style.transform="rotate(90deg)",document.body.appendChild(s),setTimeout((()=>{s.querySelector(".div-tabletext-show-detail").classList.add("fade-in-top")}),10),document.body.onclick=t=>{s.contains(t.target)||(s.remove(),a.style.transform="",document.body.onclick=null)})}}}(t,n,o,s,i),p&&e(n,p),u&&(n.colSpan=u),g&&(n.rowSpan=g),m||o.appendChild(n)}return class{constructor(e,n){var o=(e=>{if(e.jquery)return e[0];if(e instanceof HTMLElement)return e;if(t(e)){var n=document.createElement("template");return n.innerHTML=e.trim(),n.content.firstChild}return document.querySelector(e)})(e);if(!o)throw new Error("Không tìm thấy bảng "+e);if(o.querySelector("table")&&o.querySelector("table").tabletext)throw new Error("Table "+e+" đã được config!");o.innerHTML="",o.classList.add("card");const a=document.createElement("div");a.className="table-responsive",n.vhClass&&a.classList.add(n.vhClass),o.appendChild(a);const s=document.createElement("table");if(s.id=o.id+"-table",a.appendChild(s),o.appendChild(a),o.tabletext=this,this.divTable=o,this.settings=n,this.table=s,this.thead=s.querySelector("thead"),this.tbody=s.querySelector("tbody"),this.tfoot=s.querySelector("tfoot"),this.datas=[],this.headerSetting=[],this.columnSetting=[],this.rowSetting=[],this.serial=!1,this.pagination=null,this.onPaginationChange=null,this.sumColumns={},this.fixedColumns={},0==this.table.classList.length&&(this.table.classList="table table-vcenter table-bordered table-hover table-nowrap "+(n.tableInput?"table-input":"table-text")),this.table.classList.add("table-text-js"),n.headerSetting&&n.headerSetting.length>0&&(this.headerSetting=n.headerSetting),n.columnSetting&&n.columnSetting.length>0){this.columnSetting=n.columnSetting;const t=e=>{e.forEach((e=>{"object"==typeof e&&("object"==typeof e.sumName?this.sumColumns[e.sumName.name]=0:this.sumColumns[e.sumName]=0,e.columnSetting&&e.columnSetting.length>0&&t(e.columnSetting))}))};t(this.columnSetting)}if(n.rowSetting&&(this.rowSetting=this.settings.rowSetting),n.fixedColumns&&(this.fixedColumns=this.settings.fixedColumns),n.serial&&(this.serial=this.settings.serial,this.headerSetting.unshift("STT"),c(this.columnSetting)),this.thead||(this.thead=document.createElement("thead"),this.thead.id=this.table.id+"-thead",this.table.appendChild(this.thead),this.headerSetting&&this.headerSetting.length>0&&this.renderHeader()),this.tbody||(this.tbody=document.createElement("tbody"),this.tbody.id=this.table.id+"-tbody",this.table.appendChild(this.tbody)),n.afterRender&&(this.afterRender=n.afterRender),n.beforeRender&&(this.beforeRender=n.beforeRender),n.datas&&n.datas.length>0&&(this.datas=this.settings.datas,this.renderView()),n.bottomDiv){const t=document.createElement("div");t.classList.add("p-2");const e=n.bottomDiv(this.sumColumns);"string"==typeof e?t.innerHTML=e:e instanceof HTMLElement&&t.appendChild(e),o.appendChild(t),this.bottomDiv=t,this.bottomDivFunction=n.bottomDiv}n.onPaginationChange&&(this.onPaginationChange=n.onPaginationChange),n.pagination&&this.renderPagination()}renderHeader(){let t=r(this.headerSetting);this.thead.appendChild(t)}render(t){this.tbody.innerHTML="";const e=(t,o,a,s=null)=>{this.serial&&(t.stt=s?s+"."+o:o);let i=document.createElement("tr");if(this.rowSetting.class&&("string"==typeof this.rowSetting.class?i.classList.add(this.rowSetting.class):"function"==typeof this.rowSetting.class&&(i.className=this.rowSetting.class(t))),this.rowSetting.data)for(let e in this.rowSetting.data)this.rowSetting.data[e].includes(".")?i.dataset[e]=n(t,this.rowSetting.data[e]):i.dataset[e]=void 0!==t[this.rowSetting.data[e]]?t[this.rowSetting.data[e]]:"";this.rowSetting.onClick&&(i.onclick=()=>this.rowSetting.onClick(t));let l=null,r=null,c=!1,h=!1;a.forEach(((e,n)=>{if(e.columnSetting&&e.columnSetting.length>0)l=e.columnSetting,r=t[e.name];else{const n={haveColMobile:{value:h},haveFirstMain:{value:c}},o=document.createElement("td");!function(t,e,n,o){"string"==typeof n&&n.length>0||"object"==typeof n&&n.name||n.data?p(t.sumColumns,e,n,o):n.content?(e.innerHTML=n.content(o),e.data=o):n.btnGroup?e.appendChild(d(n.btnGroup,o)):e.innerHTML=""}(this,o,e,t),u(this,o,i,e,t,n),h=n.haveColMobile.value,c=n.haveFirstMain.value}})),t.$row=i,this.tbody.appendChild(i),this.rowSetting.afterRowAppend&&this.rowSetting.afterRowAppend(i,t),l&&r&&(i.classList.add(s?"parent-row_"+s:"parent-row"),r.forEach(((t,n)=>{e(t,n+1,l,s?s+"."+o:o,!0)})))};t.forEach(((t,n)=>{e(t,n+1,this.columnSetting)}))}renderPagination(){const t=document.createElement("div");t.className="tabletext-pagination row justify-content-between px-2";const e=document.createElement("div"),n=document.createElement("div");e.className="col-auto",n.className="col-auto",e.innerHTML='<div class="row pt-1"><div class="col-auto"><select class="form-select"><option value="50" selected="">50</option><option value="100">100</option><option value="200">200</option><option value="0">Tất cả</option></select></div><div class="col-auto px-0 d-none parent-row-record"><label class="col-form-label"><span class="row-record"></span>/<span class="total-record"></span></label></div></div>',t.appendChild(e);const o=e.querySelector("select");n.innerHTML='<ul class="pagination m-2 justify-content-end"><li class="page-item disabled first"><button class="page-link"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevrons-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M11 7l-5 5l5 5"></path><path d="M17 7l-5 5l5 5"></path></svg></button></li><li class="page-item disabled before"><button class="page-link" tabindex="-1" aria-disabled="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M15 6l-6 6l6 6"></path></svg></button></li><li class="page-item d-none"><button class="page-link"></button></li><li class="page-item active"><button class="page-link">1</button></li><li class="page-item d-none"><button class="page-link"></button></li><li class="page-item disabled after"><button class="page-link">\x3c!-- Download SVG icon from http://tabler-icons.io/i/chevron-right --\x3e<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M9 6l6 6l-6 6"></path></svg></button></li><li class="page-item disabled last"><button class="page-link"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevrons-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M7 7l5 5l-5 5"></path><path d="M13 7l5 5l-5 5"></path></svg></li></ul>';const a=n.querySelector(".page-item.active");n.querySelector(".page-item.first").page=1,n.querySelector(".page-item.last").page=-1,n.querySelectorAll(".page-item").forEach((t=>{t.onclick=()=>{t.classList.contains("active")||t.classList.contains("disabled")||this.onPaginationChange(this.pagination.rowNumber.value,t.page)}})),this.onPaginationChange&&(o.onchange=()=>{this.onPaginationChange(this.pagination.rowNumber.value,a.page)}),t.appendChild(n),this.table.parentNode.parentNode.insertBefore(t,this.table.parentNode.nextSibling),this.pagination={rowNumber:e.querySelector("select"),rowRecord:e.querySelector(".parent-row-record"),pagi:n}}fixedColumn(){const{left:t,right:e}=this.fixedColumns,n=this.tbody,o=this.thead;if(t||e){const a=this.divTable.querySelector(".table-responsive");e&&a.scrollWidth>a.clientWidth&&this.table.classList.add("scroll-right"),a.addEventListener("scroll",(()=>{0===a.scrollLeft?this.table.classList.remove("scroll-left"):this.table.classList.add("scroll-left"),a.scrollLeft+a.clientWidth>=a.scrollWidth-1?this.table.classList.remove("scroll-right"):this.table.classList.add("scroll-right")}));const{startWidths:s,endWidths:i}=function(t,e){if(!n||0===n.rows.length)return;const o=n.rows[0].cells,a=o.length,s=[],i=[],l="object"==typeof t,r=l?t.from-1:0,c=l?t.to:t,d="object"==typeof e,h=d?e.from-1:0,p=d?e.to-1:e-1;let u=!1;for(let t=0;t<Math.min(c,a);t++)t<r?s.push(null):u?s.push(o[t-1].offsetWidth):(u=!0,s.push(0));for(let t=a-p;t<=a;t++){const e=a-t;e<h?i.push(null):e===h?i.push(0):t<a&&i.push(o[t].offsetWidth)}return{startWidths:s,endWidths:i}}(t,e),l=[],r=[];for(let t=0,e=0;t<s.length;t++){const n=s[t];null===n?l[t]=null:(e+=n,l[t]=e)}for(let t=i.length-1,e=0;t>=0;t--){const n=i[t];null===n?r[t]=null:(e+=n,r[t]=e)}const c=n.querySelectorAll("tr"),d=function(t){const e=Array.from(t.querySelectorAll("tr")),n=[];let o=[];return e.forEach(((t,a)=>{const s=Array.from(t.children);let i=0;s.forEach((t=>{for(;o[a]?.[i];)i++;const s=parseInt(t.getAttribute("rowspan")||1),l=parseInt(t.getAttribute("colspan")||1);for(let r=0;r<s;r++)for(let s=0;s<l;s++){const l=a+r,c=i+s;o[l]||(o[l]=[]),o[l][c]=t,r+a===e.length-1&&(n[c]=t)}i+=l}))})),n}(o),h=d[0]?.style.background,p=i.length;c.forEach((t=>{const e=t.querySelectorAll("td");for(let t=0;t<l.length;t++){const n=l[t];if(null===n)continue;const o=e[t],a=d[t];t===l.length-1&&(o.classList.add("last-cell-left"),a&&a.classList.add("last-cell-left")),o&&(o.style.cssText+=`position:sticky; left:${n}px; z-index:3; background:white;`),a&&(a.style.cssText+=`position:sticky; left:${n}px; z-index:4; background:${h};`)}for(let t=0;t<r.length;t++){const n=r[t];if(null===n)continue;const o=e.length-p+t,a=e[o],s=d[o];0===t&&(a.classList.add("last-cell-right"),s&&s.classList.add("last-cell-right")),a&&(a.style.cssText+=`position:sticky; right:${n}px; z-index:3; background:white;`),s&&(s.style.cssText+=`position:sticky; right:${n}px; z-index:4; background:${h};`)}}))}}setContent(t){this.datas=t,this.renderView()}setContentAndPagination(t){this.datas=t.result,this.setPagination(t.prePage,t.nextPage,t.result.length,t.totalRecords),this.renderView()}renderView(t=this.datas){for(let t in this.sumColumns)this.sumColumns.hasOwnProperty(t)&&(this.sumColumns[t]=0);this.beforeRender&&this.beforeRender(),setTimeout((()=>{if(this.render(t),this.afterRender&&this.afterRender(),this.fixedColumns&&this.fixedColumn(),this.bottomDiv){const t=this.bottomDivFunction(this.sumColumns);"string"==typeof t?this.bottomDiv.innerHTML=t:t instanceof HTMLElement&&(this.bottomDiv.innerHTML="",this.bottomDiv.appendChild(t))}}),0)}setPagination(t,e,n,o){const{rowRecord:a,pagi:s}=this.pagination;o&&(a.classList.remove("d-none"),a.querySelector(".row-record").textContent=n,a.querySelector(".total-record").textContent=o);const i=s.querySelector(".page-item.active");i.page=t+1,i.querySelector("button").textContent=i.page;const l=s.querySelector(".first"),r=s.querySelector(".before"),c=s.querySelector(".after"),d=s.querySelector(".last"),h=i.previousElementSibling,p=i.nextElementSibling,u=(t,e,n)=>{t.page=e,t.classList.toggle("disabled",n),t.querySelector("svg")||(t.querySelector("button").textContent=e||""),t.querySelector("svg")||t.classList.toggle("d-none",!e)};u(r,t,0===t),u(l,1,0===t),u(h,t,0===t),u(c,e,0===e),u(d,-1,0===e),u(p,e,0===e)}clearContent(){this.datas=[],this.renderView()}refreshContent(){this.renderView()}destroy(){this.divTable.innerHTML="",delete this.divTable.tabletext}addData(t){this.datas.push(t),this.renderView()}removeData(t){this.datas.splice(t,1),this.renderView()}filterData(t){this.renderView(this.datas.filter(t))}}}();